<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}

  <link rel="preload" href="/assets/css/style-light.css" as="style">
  <link rel="preload" href="/assets/css/style-dark.css" as="style">

  <link id="main-stylesheet" rel="stylesheet" href="{{ '/assets/css/style-light.css' | relative_url }}">
  <script>

    // begin dark mode set and toggle //
    let metaTag = document.getElementById("main-stylesheet");
    let SSHref = metaTag.href;
    let SSName = SSHref.substring(SSHref.lastIndexOf('/') + 1);
    let prevSkin = localStorage.getItem("minima-ss");
    let isDark = false;
    const darkness = window.matchMedia('(prefers-color-scheme: dark)');
    const inIframe = window.self !== window.top;

    if (prevSkin == "style-dark.css") {
      metaTag.href = SSHref.replace(SSName, prevSkin);
      isDark = true;
    }
    else if (darkness.matches && prevSkin != "style-light.css" && !inIframe) {
      metaTag.href = SSHref.replace(SSName, "style-dark.css");
      isDark = true;
    }

    function changeSkin() {
      if (isDark) {
        metaTag.href = SSHref.replace(SSName, "style-light.css");
        localStorage.setItem("minima-ss", "style-light.css");
        isDark = false;
      } else {
        metaTag.href = SSHref.replace(SSName, "style-dark.css");
        localStorage.setItem("minima-ss", "style-dark.css");
        isDark = true;
      }
    }
    // end dark mode set and toggle //

  </script>
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
  {%- include google-analytics.html -%}
  {%- endif -%}

  {%- include custom-head.html -%}

</head>